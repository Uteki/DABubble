<div class="register-container">
  <div class="logo-wrapper logo-moved">
    <img
      src="./../../../assets/icons/logo-DABubble.png"
      alt="DABubble"
      class="logo"
    />
  </div>
  <div class="register-form-wrapper show">
    <div class="register-card">
      <button class="back-button" (click)="goBack()">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="40"
          height="40"
          viewBox="0 0 40 40"
          fill="none"
        >
          <mask
            id="mask0_182_274"
            style="mask-type: alpha"
            maskUnits="userSpaceOnUse"
            x="8"
            y="8"
            width="24"
            height="24"
          >
            <rect x="8" y="8" width="24" height="24" fill="#D9D9D9" />
          </mask>
          <g mask="url(#mask0_182_274)">
            <path
              d="M18.875 27.3L12.275 20.7C12.175 20.6 12.104 20.4916 12.062 20.375C12.0207 20.2583 12 20.1333 12 20C12 19.8666 12.0207 19.7416 12.062 19.625C12.104 19.5083 12.175 19.4 12.275 19.3L18.875 12.7C19.0583 12.5166 19.2873 12.4206 19.562 12.412C19.8373 12.404 20.075 12.5 20.275 12.7C20.475 12.8833 20.5793 13.1123 20.588 13.387C20.596 13.6623 20.5 13.9 20.3 14.1L15.4 19H26.575C26.8583 19 27.096 19.0956 27.288 19.287C27.4793 19.479 27.575 19.7166 27.575 20C27.575 20.2833 27.4793 20.5206 27.288 20.712C27.096 20.904 26.8583 21 26.575 21H15.4L20.3 25.9C20.4833 26.0833 20.5793 26.3166 20.588 26.6C20.596 26.8833 20.5 27.1166 20.3 27.3C20.1167 27.5 19.8833 27.6 19.6 27.6C19.3167 27.6 19.075 27.5 18.875 27.3Z"
              fill="black"
            />
          </g>
        </svg>
      </button>

      <h2>Konto erstellen</h2>
      <p class="subtitle">
        Mit deinem Namen und deiner E-Mail-Adresse hast du dein neues
        DABubble-Konto.
      </p>
      <div *ngIf="errorMessage" class="error-message">
        {{ errorMessage }}
      </div>
      <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
          <div class="input-wrapper">
            <span class="input-icon">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                <circle
                  cx="10"
                  cy="6"
                  r="3"
                  stroke="#686868"
                  stroke-width="1.5"
                />
                <path
                  d="M3 18C3 15 6 12 10 12C14 12 17 15 17 18"
                  stroke="#686868"
                  stroke-width="1.5"
                  stroke-linecap="round"
                />
              </svg>
            </span>
            <input
              type="text"
              formControlName="fullName"
              placeholder="Name und Nachname"
              class="form-input"
              [class.error]="
                registerForm.get('fullName')?.touched &&
                registerForm.get('fullName')?.invalid
              "
            />
          </div>
          <!-- Error unter dem input-wrapper -->
          <div
            *ngIf="
              registerForm.get('fullName')?.touched &&
              registerForm.get('fullName')?.invalid
            "
            class="error-text"
          >
            <span *ngIf="registerForm.get('fullName')?.errors?.['required']">
              Name ist erforderlich.
            </span>
            <span *ngIf="registerForm.get('fullName')?.errors?.['minlength']">
              Name muss mindestens 3 Zeichen lang sein.
            </span>
          </div>
        </div>

        <div class="form-group">
          <div class="input-wrapper">
            <span class="input-icon">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M2 6L10 11L18 6" stroke="#686868" stroke-width="1.5" />
                <rect
                  x="2"
                  y="5"
                  width="16"
                  height="11"
                  rx="2"
                  stroke="#686868"
                  stroke-width="1.5"
                  fill="none"
                />
              </svg>
            </span>
            <input
              type="email"
              formControlName="email"
              placeholder="beispielname@email.com"
              class="form-input"
              [class.error]="
                registerForm.get('email')?.touched &&
                registerForm.get('email')?.invalid
              "
            />
          </div>
          <!-- Error unter dem input-wrapper -->
          <div
            *ngIf="
              registerForm.get('email')?.touched &&
              registerForm.get('email')?.invalid
            "
            class="error-text"
          >
            <span *ngIf="registerForm.get('email')?.errors?.['required']">
              E-Mail ist erforderlich.
            </span>
            <span *ngIf="registerForm.get('email')?.errors?.['email']">
              Ungültige E-Mail-Adresse.
            </span>
          </div>
        </div>

        <div class="form-group">
          <div class="input-wrapper">
            <span class="input-icon">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                <rect
                  x="5"
                  y="9"
                  width="10"
                  height="8"
                  rx="1"
                  stroke="#686868"
                  stroke-width="1.5"
                  fill="none"
                />
                <path
                  d="M7 9V6C7 4.34315 8.34315 3 10 3C11.6569 3 13 4.34315 13 6V9"
                  stroke="#686868"
                  stroke-width="1.5"
                />
              </svg>
            </span>
            <input
              type="password"
              formControlName="password"
              placeholder="Passwort"
              class="form-input"
              [class.error]="
                registerForm.get('password')?.touched &&
                registerForm.get('password')?.invalid
              "
            />
          </div>
          <!-- Error unter dem input-wrapper -->
          <div
            *ngIf="
              registerForm.get('password')?.touched &&
              registerForm.get('password')?.invalid
            "
            class="error-text"
          >
            <span *ngIf="registerForm.get('password')?.errors?.['required']">
              Passwort ist erforderlich.
            </span>
            <span *ngIf="registerForm.get('password')?.errors?.['minlength']">
              Passwort muss mindestens 6 Zeichen lang sein.
            </span>
          </div>
        </div>

        <div class="checkbox-group">
          <input
            type="checkbox"
            id="privacy-check"
            formControlName="privacyAccepted"
            class="checkbox"
            [class.error]="
              registerForm.get('privacyAccepted')?.touched &&
              registerForm.get('privacyAccepted')?.invalid
            "
          />
          <label for="privacy-check">
            Ich stimme der
            <a (click)="goToPrivacyPolicy()" class="privacy-link"
              >Datenschutzerklärung</a
            >
            zu.
          </label>
          <!-- Error unter dem Checkbox-Group -->
          <div
            *ngIf="
              registerForm.get('privacyAccepted')?.touched &&
              registerForm.get('privacyAccepted')?.invalid
            "
            class="error-text"
          >
            Du musst der Datenschutzerklärung zustimmen.
          </div>
        </div>

        <button
          type="submit"
          class="btn-continue"
          [disabled]="!registerForm.valid"
        >
          Weiter
        </button>
      </form>
    </div>
  </div>
  <div class="footer-links" [class.show]="showLogin">
    <a (click)="goTolegalNotice()" class="footer-link">Impressum</a>
    <a (click)="goToPrivacyPolicy()" class="footer-link">Datenschutz</a>
  </div>
</div>