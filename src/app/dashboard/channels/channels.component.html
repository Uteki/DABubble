<div class="sidebar" [class.closed]="!sidebarOpen">
  <button
    class="toggle-menu"
    (click)="toggleMenu()"
    [class.open]="sidebarOpen"
    [class.closed]="!sidebarOpen"
    aria-label="Workspace-Menü umschalten"
  >
    <span class="label">
      {{ sidebarOpen ? "Workspace-Menü schließen" : "Workspace-Menü öffnen" }}
    </span>

    <img
      class="icon icon-normal"
      [src]="
        sidebarOpen
          ? '../../../assets/img/showMenuOpen.png'
          : '../../../assets/img/showMenuClose.png'
      "
      [alt]="sidebarOpen ? 'Menü schließen' : 'Menü öffnen'"
      width="24"
      height="24"
      draggable="false"
    />

    <img
      class="icon icon-hover"
      [src]="
        sidebarOpen
          ? '../../../assets/img/showMenuHoverOpen.png'
          : '../../../assets/img/showMenuHoverClose.png'
      "
      [alt]="sidebarOpen ? 'Menü schließen (Hover)' : 'Menü öffnen (Hover)'"
      width="24"
      height="24"
      draggable="false"
    />
  </button>

  <div class="sidebar-panel">
    <header>
      <div>
        <div>
          <svg
            width="36"
            height="24"
            viewBox="0 0 36 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M11.4 21.552L8.448 18.588L24.348 2.70001L27.3 5.65201L11.4 21.552Z"
              fill="url(#paint0_linear_153722_8269)"
            />
            <path
              d="M12.324 3.36L3.68397 12L0.719971 9.04799L9.35997 0.395996L12.324 3.36ZM9.35997 23.604L12.312 20.652L3.67197 12.012L0.719971 14.952L9.35997 23.604Z"
              fill="url(#paint1_linear_153722_8269)"
            />
            <path
              d="M35.28 9.04802L32.328 12L23.688 3.36002L26.64 0.40802L35.28 9.04802ZM35.28 14.952L32.328 12L23.688 20.64L26.64 23.592L35.28 14.952Z"
              fill="url(#paint2_linear_153722_8269)"
            />
            <defs>
              <linearGradient
                id="paint0_linear_153722_8269"
                x1="8.44904"
                y1="12.1219"
                x2="27.3014"
                y2="12.1219"
                gradientUnits="userSpaceOnUse"
              >
                <stop stop-color="#1381FF" />
                <stop offset="0.0780981" stop-color="#1376FF" />
                <stop offset="0.289" stop-color="#125CFF" />
                <stop offset="0.5081" stop-color="#124AFF" />
                <stop offset="0.7388" stop-color="#123FFF" />
                <stop offset="1" stop-color="#123CFF" />
              </linearGradient>
              <linearGradient
                id="paint1_linear_153722_8269"
                x1="0.719455"
                y1="12"
                x2="12.3215"
                y2="12"
                gradientUnits="userSpaceOnUse"
              >
                <stop stop-color="#13E4E8" />
                <stop offset="1" stop-color="#1381FF" />
              </linearGradient>
              <linearGradient
                id="paint2_linear_153722_8269"
                x1="23.6784"
                y1="12"
                x2="35.2805"
                y2="12"
                gradientUnits="userSpaceOnUse"
              >
                <stop stop-color="#1381FF" />
                <stop offset="0.1287" stop-color="#4271FF" />
                <stop offset="0.2599" stop-color="#6963FF" />
                <stop offset="0.3956" stop-color="#8A58FF" />
                <stop offset="0.5345" stop-color="#A44FFF" />
                <stop offset="0.678" stop-color="#B649FF" />
                <stop offset="0.8291" stop-color="#C045FF" />
                <stop offset="1" stop-color="#C444FF" />
              </linearGradient>
            </defs>
          </svg>
        </div>

        <h2>Devspace</h2>
      </div>

      <svg
        width="21"
        height="21"
        viewBox="0 0 21 21"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M2 20.7C1.45 20.7 0.979167 20.5042 0.5875 20.1125C0.195833 19.7208 0 19.25 0 18.7V4.69999C0 4.14999 0.195833 3.67915 0.5875 3.28749C0.979167 2.89582 1.45 2.69999 2 2.69999H10.925L8.925 4.69999H2V18.7H16V11.75L18 9.74999V18.7C18 19.25 17.8042 19.7208 17.4125 20.1125C17.0208 20.5042 16.55 20.7 16 20.7H2ZM13.175 3.27499L14.6 4.67499L8 11.275V12.7H9.4L16.025 6.07499L17.45 7.47499L10.825 14.1C10.6417 14.2833 10.4292 14.4292 10.1875 14.5375C9.94583 14.6458 9.69167 14.7 9.425 14.7H7C6.71667 14.7 6.47917 14.6042 6.2875 14.4125C6.09583 14.2208 6 13.9833 6 13.7V11.275C6 11.0083 6.05 10.7542 6.15 10.5125C6.25 10.2708 6.39167 10.0583 6.575 9.87499L13.175 3.27499ZM17.45 7.47499L13.175 3.27499L15.675 0.774988C16.075 0.374988 16.5542 0.174988 17.1125 0.174988C17.6708 0.174988 18.1417 0.374988 18.525 0.774988L19.925 2.19999C20.3083 2.58332 20.5 3.04999 20.5 3.59999C20.5 4.14999 20.3083 4.61665 19.925 4.99999L17.45 7.47499Z"
          fill="black"
        />
      </svg>
    </header>

    <nav>
      <div>
        <h3>
          <svg
            width="20"
            height="18"
            viewBox="0 0 20 18"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M4 18C2.9 18 1.95833 17.6083 1.175 16.825C0.391667 16.0417 0 15.1 0 14C0 12.9 0.391667 11.9583 1.175 11.175C1.95833 10.3917 2.9 10 4 10C5.1 10 6.04167 10.3917 6.825 11.175C7.60833 11.9583 8 12.9 8 14C8 15.1 7.60833 16.0417 6.825 16.825C6.04167 17.6083 5.1 18 4 18Z"
              fill="black"
            />
          </svg>
          Channels
        </h3>

        <svg
          (click)="toggleOverlay()"
          width="14"
          height="14"
          viewBox="0 0 14 14"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M7 14C6.71667 14 6.47933 13.904 6.288 13.712C6.096 13.5207 6 13.2833 6 13V8H1C0.716667 8 0.479 7.904 0.287 7.712C0.0956668 7.52067 0 7.28333 0 7C0 6.71667 0.0956668 6.479 0.287 6.287C0.479 6.09567 0.716667 6 1 6H6V1C6 0.716667 6.096 0.479 6.288 0.287C6.47933 0.0956668 6.71667 0 7 0C7.28333 0 7.521 0.0956668 7.713 0.287C7.90433 0.479 8 0.716667 8 1V6H13C13.2833 6 13.5207 6.09567 13.712 6.287C13.904 6.479 14 6.71667 14 7C14 7.28333 13.904 7.52067 13.712 7.712C13.5207 7.904 13.2833 8 13 8H8V13C8 13.2833 7.90433 13.5207 7.713 13.712C7.521 13.904 7.28333 14 7 14Z"
            fill="black"
          />
        </svg>
      </div>

      <output>
        <div
          *ngFor="let channel of channels"
          (click)="swapChannel(channel.id, channel.name)"
        >
          # {{ channel.name.charAt(0).toUpperCase() + channel.name.slice(1) }}
        </div>
      </output>
    </nav>

    <nav>
      <div>
        <h3
          [class.deactive]="!directMessagesShown"
          (click)="toggleDirectMessages()"
        >
          <svg
            width="20"
            height="20"
            viewBox="0 0 20 20"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M3.85 15.1C4.7 14.45 5.65 13.9373 6.7 13.562C7.75 13.1873 8.85 13 10 13C11.15 13 12.25 13.1873 13.3 13.562C14.35 13.9373 15.3 14.45 16.15 15.1C16.7333 14.4167 17.1877 13.6417 17.513 12.775C17.8377 11.9083 18 10.9833 18 10C18 7.78333 17.221 5.89567 15.663 4.337C14.1043 2.779 12.2167 2 10 2C7.78333 2 5.896 2.779 4.338 4.337C2.77933 5.89567 2 7.78333 2 10C2 10.9833 2.16267 11.9083 2.488 12.775C2.81267 13.6417 3.26667 14.4167 3.85 15.1ZM10 11C9.01667 11 8.18733 10.6627 7.512 9.988C6.83733 9.31267 6.5 8.48333 6.5 7.5C6.5 6.51667 6.83733 5.68733 7.512 5.012C8.18733 4.33733 9.01667 4 10 4C10.9833 4 11.8127 4.33733 12.488 5.012C13.1627 5.68733 13.5 6.51667 13.5 7.5C13.5 8.48333 13.1627 9.31267 12.488 9.988C11.8127 10.6627 10.9833 11 10 11Z"
              fill="black"
            />
          </svg>
          Direktnachrichten
        </h3>
      </div>

      <output class="direct-messages">
        <div
          [ngClass]="{ 'd-none': directMessagesNone }"
          [class.deactive]="!directMessagesShown"
          class="direct-messages-list"
        >
          <div *ngFor="let user of users">
            <article (click)="emitPartner(user.id)">
              <figure class="user-avatar">
                <img [src]="user.avatar" [alt]="user.name" />
                @if (user.status) {
                <img src="./../../../assets/img/online.png" alt="" />
                } @else {
                <img src="./../../../assets/img/offline.svg" alt="" />
                }
              </figure>
              <p>{{ user.name }}</p>
            </article>
          </div>
        </div>
      </output>
    </nav>
  </div>
</div>

<section
  (click)="toggleOverlay()"
  class="overlay"
  [ngClass]="{ 'd-none': !overlayActivated }"
>
  <div
    [ngClass]="{ 'd-none': switchOverlay }"
    click-stop-propagation
    class="create-channel"
  >
    <div>
      <h3>Channel erstellen</h3>
      <div>
        <svg
          (click)="toggleOverlay()"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <mask
            id="mask0_153677_6137"
            style="mask-type: alpha"
            maskUnits="userSpaceOnUse"
            x="0"
            y="0"
            width="24"
            height="24"
          >
            <rect width="24" height="24" fill="#D9D9D9" />
          </mask>
          <g mask="url(#mask0_153677_6137)">
            <path
              d="M12 13.4L7.09999 18.3C6.91665 18.4833 6.68332 18.575 6.39999 18.575C6.11665 18.575 5.88332 18.4833 5.69999 18.3C5.51665 18.1167 5.42499 17.8833 5.42499 17.6C5.42499 17.3167 5.51665 17.0833 5.69999 16.9L10.6 12L5.69999 7.09999C5.51665 6.91665 5.42499 6.68332 5.42499 6.39999C5.42499 6.11665 5.51665 5.88332 5.69999 5.69999C5.88332 5.51665 6.11665 5.42499 6.39999 5.42499C6.68332 5.42499 6.91665 5.51665 7.09999 5.69999L12 10.6L16.9 5.69999C17.0833 5.51665 17.3167 5.42499 17.6 5.42499C17.8833 5.42499 18.1167 5.51665 18.3 5.69999C18.4833 5.88332 18.575 6.11665 18.575 6.39999C18.575 6.68332 18.4833 6.91665 18.3 7.09999L13.4 12L18.3 16.9C18.4833 17.0833 18.575 17.3167 18.575 17.6C18.575 17.8833 18.4833 18.1167 18.3 18.3C18.1167 18.4833 17.8833 18.575 17.6 18.575C17.3167 18.575 17.0833 18.4833 16.9 18.3L12 13.4Z"
              fill="black"
            />
          </g>
        </svg>
      </div>
    </div>

    <span>
      Channels dienen deinem Team zur Kommunikation. Am besten sollten sie
      themenbezogen sein #marketing zum Beispiel.</span
    >
    <h4>Channel-Name</h4>
    <div class="channel-name">
      <h2>#</h2>
      <input type="text" placeholder="z.B. Kooperationsprojekte" />
    </div>
    <h4>
      Beschreibung
      <h4>(optional)</h4>
    </h4>
    <div class="channel-description">
      <input type="text" placeholder="Dein Text hier" />
    </div>
    <div class="channel-create-one">
      <button (click)="switchOverlay = true">Erstellen</button>
    </div>
  </div>

  <div
    click-stop-propagation
    [ngClass]="{ 'd-none': !switchOverlay }"
    class="add-channel-member"
  >
    <div>
      <h3>Leute hinzufügen</h3>
      <div>
        <svg
          (click)="toggleOverlay(); switchOverlay = false"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <mask
            id="mask0_153677_6137"
            style="mask-type: alpha"
            maskUnits="userSpaceOnUse"
            x="0"
            y="0"
            width="24"
            height="24"
          >
            <rect width="24" height="24" fill="#D9D9D9" />
          </mask>
          <g mask="url(#mask0_153677_6137)">
            <path
              d="M12 13.4L7.09999 18.3C6.91665 18.4833 6.68332 18.575 6.39999 18.575C6.11665 18.575 5.88332 18.4833 5.69999 18.3C5.51665 18.1167 5.42499 17.8833 5.42499 17.6C5.42499 17.3167 5.51665 17.0833 5.69999 16.9L10.6 12L5.69999 7.09999C5.51665 6.91665 5.42499 6.68332 5.42499 6.39999C5.42499 6.11665 5.51665 5.88332 5.69999 5.69999C5.88332 5.51665 6.11665 5.42499 6.39999 5.42499C6.68332 5.42499 6.91665 5.51665 7.09999 5.69999L12 10.6L16.9 5.69999C17.0833 5.51665 17.3167 5.42499 17.6 5.42499C17.8833 5.42499 18.1167 5.51665 18.3 5.69999C18.4833 5.88332 18.575 6.11665 18.575 6.39999C18.575 6.68332 18.4833 6.91665 18.3 7.09999L13.4 12L18.3 16.9C18.4833 17.0833 18.575 17.3167 18.575 17.6C18.575 17.8833 18.4833 18.1167 18.3 18.3C18.1167 18.4833 17.8833 18.575 17.6 18.575C17.3167 18.575 17.0833 18.4833 16.9 18.3L12 13.4Z"
              fill="black"
            />
          </g>
        </svg>
      </div>
    </div>

    <div>
      <div>
        <input
          type="radio"
          id="all-members"
          value="all-members"
          name="add-members"
          (change)="onChange($event)"
        />
        <label for="all-members"
          >Alle Mitglieder von
          <h3>Entwicklerteam</h3>
          hinzufügen</label
        ><br />
      </div>
      <div>
        <input
          type="radio"
          id="select-members"
          value="specific-members"
          name="add-members"
          (change)="onChange($event)"
        />
        <label for="specific-members">Bestimmte Leute hinzufügen</label><br />
      </div>

      <div
        (click)="onDivClick($event)"
        [ngClass]="{ 'd-none': selectedValue === 'all-members' }"
        class="members-list no-scrollbar"
      >
        <div>
          <div
            [ngClass]="{ 'd-none': inputFocused }"
            *ngFor="let channelUser of selectedChannelUsers; let i = index"
          >
            <img [src]="channelUser.avatar" [alt]="channelUser.name" />
            <p>{{ channelUser.name }}</p>
            <div>
              <svg
                (click)="deleteMember(i)"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <mask
                  id="mask0_153677_6137"
                  style="mask-type: alpha"
                  maskUnits="userSpaceOnUse"
                  x="0"
                  y="0"
                  width="24"
                  height="24"
                >
                  <rect width="24" height="24" fill="#D9D9D9" />
                </mask>
                <g mask="url(#mask0_153677_6137)">
                  <path
                    d="M12 13.4L7.09999 18.3C6.91665 18.4833 6.68332 18.575 6.39999 18.575C6.11665 18.575 5.88332 18.4833 5.69999 18.3C5.51665 18.1167 5.42499 17.8833 5.42499 17.6C5.42499 17.3167 5.51665 17.0833 5.69999 16.9L10.6 12L5.69999 7.09999C5.51665 6.91665 5.42499 6.68332 5.42499 6.39999C5.42499 6.11665 5.51665 5.88332 5.69999 5.69999C5.88332 5.51665 6.11665 5.42499 6.39999 5.42499C6.68332 5.42499 6.91665 5.51665 7.09999 5.69999L12 10.6L16.9 5.69999C17.0833 5.51665 17.3167 5.42499 17.6 5.42499C17.8833 5.42499 18.1167 5.51665 18.3 5.69999C18.4833 5.88332 18.575 6.11665 18.575 6.39999C18.575 6.68332 18.4833 6.91665 18.3 7.09999L13.4 12L18.3 16.9C18.4833 17.0833 18.575 17.3167 18.575 17.6C18.575 17.8833 18.4833 18.1167 18.3 18.3C18.1167 18.4833 17.8833 18.575 17.6 18.575C17.3167 18.575 17.0833 18.4833 16.9 18.3L12 13.4Z"
                    fill="black"
                  />
                </g>
              </svg>
            </div>
          </div>

          <input
            id="member-input"
            #inputEl
            (focus)="onFocus()"
            (blur)="onBlur()"
            (input)="onInputChange($any($event.target).value)"
            type="text"
            placeholder="Name eingeben"
          />
        </div>
      </div>

      <div
        class="member-wrapper no-scrollbar"
        [ngClass]="{ 'd-none': !nameInputValue }"
      >
        <div
          *ngFor="let user of users; let i = index"
          [id]="'channel-user-' + user.uid"
          [class.d-none]="!foundIndexes.includes(i)"
          (click)="addUserToChannel(i)"
        >
          <article>
            <figure class="user-avatar">
              <img [src]="user.avatar" [alt]="user.name" />
              @if (user.status) {
              <img src="./../../../assets/img/online.png" alt="" />
              } @else {
              <img src="./../../../assets/img/offline.svg" alt="" />
              }
            </figure>
            <p>{{ user.name }}</p>
          </article>
        </div>
      </div>

      <div>
        <button (click)="switchOverlay = false; overlayActivated = false">
          Erstellen
        </button>
      </div>
    </div>
  </div>
</section>
